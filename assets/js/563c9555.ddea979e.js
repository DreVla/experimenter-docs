(self.webpackChunkexperimenter_docs=self.webpackChunkexperimenter_docs||[]).push([[1459],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return c}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=o.createContext({}),s=function(e){var t=o.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return o.createElement(u.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,u=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),c=r,h=d["".concat(u,".").concat(c)]||d[c]||m[c]||a;return n?o.createElement(h,i(i({ref:t},p),{},{components:n})):o.createElement(h,i({ref:t},p))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<a;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},660:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return s},default:function(){return m}});var o=n(2122),r=n(9756),a=(n(7294),n(3905)),i={id:"rollouts-deep-dive",title:"Rollouts",slug:"rollouts"},l="Rollouts",u={unversionedId:"deep-dives/experimenter/rollouts-deep-dive",id:"deep-dives/experimenter/rollouts-deep-dive",isDocsHomePage:!1,title:"Rollouts",description:'\ud83d\udca1  Note: this feature is still in progress. See "Future work".',source:"@site/docs/deep-dives/experimenter/rollouts.mdx",sourceDirName:"deep-dives/experimenter",slug:"/deep-dives/experimenter/rollouts",permalink:"/deep-dives/experimenter/rollouts",editUrl:"https://github.com/mozilla/experimenter-docs/edit/main/docs/deep-dives/experimenter/rollouts.mdx",tags:[],version:"current",frontMatter:{id:"rollouts-deep-dive",title:"Rollouts",slug:"rollouts"},sidebar:"sidebar",previous:{title:"Surveys",permalink:"/mobile-surveys"},next:{title:"Client SDK States & Lifecycle",permalink:"/client-sdk-states-and-lifecycle"}},s=[{value:"What is a rollout?",id:"what-is-a-rollout",children:[{value:"Can I run a Nimbus experiment and a rollout simultaneously?",id:"can-i-run-a-nimbus-experiment-and-a-rollout-simultaneously",children:[]},{value:"How do I create a rollout in Experimenter?",id:"how-do-i-create-a-rollout-in-experimenter",children:[]},{value:"Incrementing your rollout&#39;s population percentage",id:"incrementing-your-rollouts-population-percentage",children:[]},{value:"Where can I find rollouts?",id:"where-can-i-find-rollouts",children:[]},{value:"Supported platforms and minimum version targeting",id:"supported-platforms-and-minimum-version-targeting",children:[]},{value:"Future work",id:"future-work",children:[]},{value:"Automated analysis",id:"automated-analysis",children:[]}]}],p={toc:s};function m(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"rollouts"},"Rollouts"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},'\ud83d\udca1  Note: this feature is still in progress. See "Future work".')),(0,a.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Want more info on rollouts?\nReach out to us in ",(0,a.kt)("a",{parentName:"p",href:"https://mozilla.slack.com/archives/CF94YGE03"},(0,a.kt)("inlineCode",{parentName:"a"},"#ask-experimenter"))," on Slack. "))),(0,a.kt)("p",null,"Rollouts are single-branch experiments that differ from a traditional experiment in a number of ways: "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"A rollout only has a single branch."),(0,a.kt)("li",{parentName:"ul"},"A client can be enrolled in both a single experiment AND rollout for a given feature."),(0,a.kt)("li",{parentName:"ul"},"The experiment feature value takes precedence over the rollout feature value."),(0,a.kt)("li",{parentName:"ul"},"Rollouts use a separate bucketing namespace from experiments so you don't need to worry about the populations colliding.")),(0,a.kt)("h2",{id:"what-is-a-rollout"},"What is a rollout?"),(0,a.kt)("h4",{id:"when-should-i-use-a-rollout-instead-of-an-experiment"},"When should I use a rollout instead of an experiment?"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Launching a winning branch of an experiment faster than the trains."),(0,a.kt)("li",{parentName:"ul"},"Launching a configuration to non-experiment users during an experiment after a short period of verification."),(0,a.kt)("li",{parentName:"ul"},"Configuring different settings for a feature for different audiences remotely."),(0,a.kt)("li",{parentName:"ul"},'A "kill switch" if you want to launch a feature but then turn it off if something goes wrong.')),(0,a.kt)("h4",{id:"when-should-i-not-use-a-rollout"},"When should I not use a rollout?"),(0,a.kt)("p",null,"If the feature has not yet been extensively tested, isn't production quality, or needs a period of validation on the trains."),(0,a.kt)("h3",{id:"can-i-run-a-nimbus-experiment-and-a-rollout-simultaneously"},"Can I run a Nimbus experiment and a rollout simultaneously?"),(0,a.kt)("p",null,"It's possible, but bear in mind that rollouts are not measurement instruments. ",(0,a.kt)("strong",{parentName:"p"},"Experiments are"),"."),(0,a.kt)("p",null,"If you have uncertainty about the effect of the feature,\nyou may wish to be guided by experiment results instead of deploying the feature immediately."),(0,a.kt)("p",null,"Before you do this, you should consider:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Future experimentation needs"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Once you deploy the feature to someone, you lose the ability to observe what happens when you introduce that feature to that user."),(0,a.kt)("li",{parentName:"ul"},"Consider whether you have a need for holdbacks."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Decision criteria"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Identify the risks you're trying to mitigate with a rollout and decide whether you need multiple stages or not."),(0,a.kt)("li",{parentName:"ul"},"If you have multiple stages, how will you know whether to advance or roll back?"),(0,a.kt)("li",{parentName:"ul"},"What signals will help you make your decision? Where will they come from?"),(0,a.kt)("li",{parentName:"ul"},"If you are relying on the experiment to guide you, make sure that the timelines are compatible."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},"Consult data science")," before relying on signals derived from the behavior of the rollout group, since rollouts are not measurement tools and lack a control.")))),(0,a.kt)("p",null,"You would need to:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Launch an experiment that targets a fixed portion of the population (sized appropriately for whatever you are trying to measure)"),(0,a.kt)("li",{parentName:"ol"},"When you are ready, launch a rollout using the steps below at a low percentage of the population"),(0,a.kt)("li",{parentName:"ol"},"As the rollout proceeds, consult your decision criteria. Change the percentage of the rollout by editing the population percentage.")),(0,a.kt)("p",null,"Keep in mind that if you do plan to release the experience to 100% of users, you should make sure it meets production quality standards."),(0,a.kt)("h3",{id:"how-do-i-create-a-rollout-in-experimenter"},"How do I create a rollout in Experimenter?"),(0,a.kt)("p",null,"There are two ways to make a rollout from the Experimenter UI. When I have a \u201cwinning branch\u201d from an in-flight experiment, I want to easily set some percentage of the non-experiment population to that feature configuration. "),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},'To create a rollout from an existing experiment, a branch can be cloned and a new rollout created (similar to the way "Clone" works for experiments). This is done using the "Promote to Rollout" buttons on the Summary page of an experiment:',(0,a.kt)("p",null),(0,a.kt)("img",{title:"Promote to rollout buttons",src:"/img/deep-dives/promote-to-rollout-buttons.png",align:"center"}))),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},'A rollout can also be manually created (without cloning) through the "Create new" button on the Experimenter home screen. To mark the new item as a rollout, check the "This is a rollout" box on the "Branches" page:',(0,a.kt)("p",null),(0,a.kt)("img",{title:"Rollout checkbox",src:"/img/deep-dives/rollout-checkbox.png",align:"center"}))),(0,a.kt)("h3",{id:"incrementing-your-rollouts-population-percentage"},"Incrementing your rollout's population percentage"),(0,a.kt)("h4",{id:"live-editability"},"Live editability"),(0,a.kt)("p",null,'The population percent of a rollout ("Percentage of clients" on the Audience page) can be edited once a rollout is launched. To make changes to this field, open your rollout, and from the left sidebar click on the Audience page. From there, you will be able to make edits and save. '),(0,a.kt)("img",{title:"Population percent field is editable",src:"/img/deep-dives/population-percent-editable.png"}),(0,a.kt)("p",null,'Once an edit has been made, you will see a "Request update" button on the summary page under the available Actions:'),(0,a.kt)("img",{title:"Request a live update button",src:"/img/deep-dives/request-live-update.png"}),(0,a.kt)("p",null),(0,a.kt)("p",null,"Once you request an update, you will follow the same review flow as launching an experiment (approval on Experimenter, and approval on Remote Settings)."),(0,a.kt)("p",null),(0,a.kt)("img",{title:"Live update review flow",src:"/img/deep-dives/live-update-review.png"}),(0,a.kt)("p",null),'Multiple edits can be made to your rollout without needing to request an update, and you will be able to see if there are unpublished changes by the red "Unpublished changes" status pill that is located by "Timeline":',(0,a.kt)("p",null),(0,a.kt)("img",{title:"Unpublished changes status pill",src:"/img/deep-dives/unpublished-changes-pill.png",height:"200"}),(0,a.kt)("h4",{id:"without-using-live-editability"},"Without using live editability"),(0,a.kt)("p",null,'For each segment of the population that you are targeting, you will create a new rollout. For example, say that you have created a rollout entitled "Important spotlight rollout" and set the population percentage to 1%. When you increase the population percentage, you don\'t want the users who are already enrolled in "Important spotlight rollout" to be unenrolled when the population is increased (see ',(0,a.kt)("a",{parentName:"p",href:"/bucketing"},"Bucketing")," for more info on this topic). "),(0,a.kt)("p",null,'Therefore, when it is time to increase your population percent, clone your existing rollout (tip: pick a helpful title such as "Important spotlight rollout - Phase 2") and set your population percentage to target your next segment of users. If you want to "increase" the population from 1% to 5%, this new "Phase 2" rollout will have a population percent equal to 4%.'),(0,a.kt)("h3",{id:"where-can-i-find-rollouts"},"Where can I find rollouts?"),(0,a.kt)("p",null,'This can be done using the filters on the Experimenter home page. You can either sort by feature to see all experiment/rollouts for said feature, or you can search by experiment type to filter by "experiment" or "rollout": '),(0,a.kt)("img",{title:"Home page filters",src:"/img/deep-dives/home-filters.png",height:"500"}),(0,a.kt)("h3",{id:"supported-platforms-and-minimum-version-targeting"},"Supported platforms and minimum version targeting"),(0,a.kt)("p",null,"Experimenter currently supports the following platforms:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Desktop"),(0,a.kt)("li",{parentName:"ul"},"Fenix (Firefox for Android)"),(0,a.kt)("li",{parentName:"ul"},"Focus Android"),(0,a.kt)("li",{parentName:"ul"},"Firefox iOS"),(0,a.kt)("li",{parentName:"ul"},"Focus iOS")),(0,a.kt)("p",null,"The minimum version supported for rollouts on all platforms (listed above) is currently 105. See ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/mozilla/experimenter/blob/main/app/experimenter/experiments/constants.py#L370"},"Experimenter")," for more details."),(0,a.kt)("h3",{id:"future-work"},"Future work"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://mozilla-hub.atlassian.net/browse/EXP-2554"},"Differentiate opt-out support")," for experiments vs rollouts"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://mozilla-hub.atlassian.net/browse/EXP-2566"},"Separation of concerns"),": separating experiment and rollout UI")),(0,a.kt)("h3",{id:"automated-analysis"},"Automated analysis"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The dashboards for rollouts that OpMon generates follow this URL pattern:",(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"https://mozilla.cloud.looker.com/dashboards/operational_monitoring::<slug with underscores>\n")))))}m.isMDXComponent=!0}}]);