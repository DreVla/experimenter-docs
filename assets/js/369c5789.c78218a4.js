"use strict";(self.webpackChunkexperimenter_docs=self.webpackChunkexperimenter_docs||[]).push([[5470],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var g=n.createContext({}),l=function(e){var t=n.useContext(g),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},c=function(e){var t=l(e.components);return n.createElement(g.Provider,{value:t},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,s=e.originalType,g=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=l(r),u=a,h=m["".concat(g,".").concat(u)]||m[u]||p[u]||s;return r?n.createElement(h,o(o({ref:t},c),{},{components:r})):n.createElement(h,o({ref:t},c))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=r.length,o=new Array(s);o[0]=u;var i={};for(var g in t)hasOwnProperty.call(t,g)&&(i[g]=t[g]);i.originalType=e,i[m]="string"==typeof e?e:a,o[1]=i;for(var l=2;l<s;l++)o[l]=r[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},2901:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>g,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>l});var n=r(7462),a=(r(7294),r(3905));const s={id:"how-a-message-gets-shown",title:"How a Message Gets Shown",slug:"/messaging/how-a-message-gets-shown"},o=void 0,i={unversionedId:"messaging/how-a-message-gets-shown",id:"messaging/how-a-message-gets-shown",title:"How a Message Gets Shown",description:"All messages belong to a message provider (a source):",source:"@site/docs/messaging/how-a-message-gets-shown.md",sourceDirName:"messaging",slug:"/messaging/how-a-message-gets-shown",permalink:"/messaging/how-a-message-gets-shown",draft:!1,editUrl:"https://github.com/mozilla/experimenter-docs/edit/main/docs/messaging/how-a-message-gets-shown.md",tags:[],version:"current",frontMatter:{id:"how-a-message-gets-shown",title:"How a Message Gets Shown",slug:"/messaging/how-a-message-gets-shown"},sidebar:"sidebar",previous:{title:"Experiments & User Messaging",permalink:"/messaging/experiments-and-user-messaging"},next:{title:"Remote Localization",permalink:"/messaging/remote-localization"}},g={},l=[{value:"Message Priority",id:"message-priority",level:3}],c={toc:l},m="wrapper";function p(e){let{components:t,...r}=e;return(0,a.kt)(m,(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"All messages belong to a message provider (a source):"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Local provider: shipped with Firefox"),(0,a.kt)("li",{parentName:"ul"},"Remote settings: a remote settings bucket"),(0,a.kt)("li",{parentName:"ul"},"Experiments: part of a treatment branch")),(0,a.kt)("p",null,"All messages have an associated ",(0,a.kt)("a",{parentName:"p",href:"https://experimenter.info/messaging/display-logic/#triggers"},"trigger")," (user action targeted by the message) and targeting condition. Additionally messages have a frequency cap and they can belong to a group that also has a frequency cap."),(0,a.kt)("p",null,"Deciding to show a message ",(0,a.kt)("a",{parentName:"p",href:"https://searchfox.org/mozilla-central/rev/65d4d3399afa79c8de5a0cc11752d2ba7c31edc1/browser/components/newtab/lib/ASRouter.jsm#1323"},"starts with the trigger action"),", when this happens we look at all the messages matching that trigger. We filter out blocked messages or messages that reached their frequency cap (or their groups frequency cap) and we evaluate targeting returning the first message that matched targeting."),(0,a.kt)("p",null,"This cycle can result in a message being shown (which will send an Exposure event + message specific telemetry events) or no message being shown if targeting didn\u2019t match (but it can still result in a Reach event being sent)."),(0,a.kt)("h3",{id:"message-priority"},"Message Priority"),(0,a.kt)("p",null,"Several messages can be listening for the same trigger condition in which case we can set a higher priority for the message we prefer."))}p.isMDXComponent=!0}}]);