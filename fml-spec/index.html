<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="Experimenter Docs" href="/opensearch.xml"><title data-react-helmet="true">The Feature Manifest Language spec | Experimenter Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://experimenter.info/fml-spec"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="The Feature Manifest Language spec | Experimenter Docs"><meta data-react-helmet="true" name="description" content="About this document"><meta data-react-helmet="true" property="og:description" content="About this document"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://experimenter.info/fml-spec"><link data-react-helmet="true" rel="alternate" href="https://experimenter.info/fml-spec" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://experimenter.info/fml-spec" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4e4a976a.css">
<link rel="preload" href="/assets/js/runtime~main.90a1e22e.js" as="script">
<link rel="preload" href="/assets/js/main.ae154802.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo-dark.svg" alt="Experimenter Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Mozilla Experimentation and Feature Delivery</b></a></div><div class="navbar__items navbar__items--right"><a href="https://experimenter.services.mozilla.com/nimbus/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Nimbus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://mana.mozilla.org/wiki/display/FJT/Project+Nimbus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Mana<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/mozilla/experimenter-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Welcome</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">What&#x27;s Newsletter</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Experimentation Workflow</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Deep Dives</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Jetstream</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Data topics</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Desktop topics</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Mobile topics</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Experimenter topics</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Specifications</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/client-sdk-states-and-lifecycle">Client SDK States &amp; Lifecycle</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/fm-unimplemented-spec">Proposed changes for Feature Manifest Language</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/fml-cli">Nimbus FML command line interface</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/fml-front-end-format">Feature Manifest Language Front-end Format As YAML</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/fml-imports-and-includes">Componentizing the Nimbus Feature Manifest</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/fml-paths">Using paths in FML</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/fml-spec">The Feature Manifest Language spec</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Experimentation Cookbook</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Additional Links</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Frequently Asked Questions</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>The Feature Manifest Language</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="about-this-document"></a>About this document<a class="hash-link" href="#about-this-document" title="Direct link to heading">#</a></h2><p>This document is the specfiication for the Feature Manifest Language for use with the Nimbus SDK. It is implemented by the <code>nimbus-fml</code> tool, which is a Rust <a href="/fml-cli">command line app run</a> at build time of a mobile app.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>Nimbus is an experimentation platform to allow product owners to easily run experiments on their mobile apps.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="high-level-concepts"></a>High level concepts<a class="hash-link" href="#high-level-concepts" title="Direct link to heading">#</a></h2><p>To the product owner, Nimbus allows you to experiment with different configurations of the application.</p><p>It does this by exposing a pre-determined proportion of the audience to different configurations of a feature. Once a winning configuration is identified, it can be rolled out to the rest of the audience, all without a re-release of the app.</p><p>To the app developer, <strong>Nimbus is a configuration store</strong>. Features are configured using data from Nimbus. Nimbus is updated at startup of each run.</p><p>The &quot;Feature&quot; in <a href="/mobile-feature-api">&quot;Feature API&quot;</a> and &quot;Feature Manifest&quot; refers to</p><blockquote><p><em>An identifiable part of the app in which changes may be detectable by a user.</em></p></blockquote><p>The &quot;Feature Manifest&quot; is a schema to describe the structure of the configuration of these features, and a complete initial configuration for the app to use.</p><p>The &quot;Feature Manifest Language&quot; is definition language for writing feature manifest.</p><p><code>nimbus-fml</code> is the name fo the tool for processing the feature manifest, to generate Swift and Kotlin and the JSON schema that Experimenter can ingest.</p><p>Features are configured remotely by sending JSON objects to the Nimbus SDK on each device. It is the job of the <code>nimbus-fml</code>, and the code that it generates to unpack that JSON, validate it, coerce it into values usable by the app and recover if anything goes wrong.</p><p>At first glance, the FML might appear like a JSON deserializer like <a href="https://github.com/google/gson/blob/master/UserGuide.md" target="_blank" rel="noopener noreferrer">Google GSON</a> or <a href="https://developer.apple.com/documentation/foundation/archives_and_serialization/encoding_and_decoding_custom_types" target="_blank" rel="noopener noreferrer">Swift&#x27;s Codable</a></p><p>This is a reasonable first approximation, however, much of the function of the Feature Manifest is to provide a <em>default configuration</em> for a feature, which is provided when one is not provided by the experiment.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="json-merge-patch"></a>JSON Merge Patch<a class="hash-link" href="#json-merge-patch" title="Direct link to heading">#</a></h3><p>For each feature, the feature manifest should define a complete configuration needed by the app, including a default value for every variable.</p><p>Remotely set experiments and rollouts will vary the configurations by presenting <em>patches</em> on that configuration. If the complete configuration of the feature can be represented by a JSON object, then patches to that configuration would be applied in a manner consistent with <a href="https://datatracker.ietf.org/doc/html/rfc7396" target="_blank" rel="noopener noreferrer">JSON Merge Patch RFC 7396</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="about-the-generated-code"></a>About the generated code<a class="hash-link" href="#about-the-generated-code" title="Direct link to heading">#</a></h3><p>Each project has one or more manifest file, containing all the features configured in that project.</p><p>Running <code>nimbus-fml</code> for a manifest generates a Swift or Kotlin class, which is named as a commmand line argument.</p><p>In the examples, this class is called <code>FxNimbus</code>, but this is project specific. This is the entry point to getting values out of Nimbus.</p><p>The generated class must be connected to the Nimbus SDK, which downloads the experiment recipes and decides which experiments this user is in.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Initialize the Nimbus SDK</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let nimbus = createNimbusForApplication()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Connect the generated code to the Nimbus SDK</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FxNimbus.shared.initialize { nimbus }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Initialize the Nimbus SDK</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">val nimbus = createNimbusForApplication()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Connect the generated code to the Nimbus SDK</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FxNimbus.initialize { nimbus }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>Feature configuration for each feature are accessed through the <code>FxNimbus.features</code> property. For example, a <code>newtab</code> feature&#x27;s configuration can be accessed thus:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">let newTabConfig = FxNimbus.features.newtab.value()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">val newTabConfig = FxNimbus.features.newtab.value()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><blockquote><p>Details:
When the <code>value()</code> method is called:</p><ul><li>the Nimbus <code>api</code> is queried to get a JSON object for the feature with id of <code>newtab</code></li><li>the result is used to construct an instance of <code>Newtab</code>, which is generated by the FML</li><li>the <code>Newtab</code> object merges its default values with the values from the JSON.</li><li>this object is cached in memory for the next time this is called.</li><li>the cache is cleared each time the <code>applyPendingExperiments()</code> method is called.</li></ul></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="recording-exposure"></a>Recording exposure<a class="hash-link" href="#recording-exposure" title="Direct link to heading">#</a></h3><p>You should record when the user has been exposed to the feature. For example, if the feature being configured are the items in the <code>app-menu</code>, then when the user <em>opens</em> the app menu, you should call <code>recordExposure</code>.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FxNimbus.shared.features.appMenu.recordExposure()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">FxNimbus.features.appMenu.recordExposure()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><blockquote><p>Feature design hint:
As a rule of thumb, if you find yourself calling <code>recordExposure</code> for the same feature in multiple places, you probably should rethink
what the feature actually is.
e.g. an <code>app-menu</code> may have a hamburger menu icon, and some menu items.
The user is exposed to the hamburger menu icon every time the toolbar is shown, but the menu items only when the menu is opened.
This would suggest that the hamburger menu icon needs to be specified in a different feature, e.g. the <code>toolbar</code> feature.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="identifier-cases"></a>Identifier cases<a class="hash-link" href="#identifier-cases" title="Direct link to heading">#</a></h3><p>All the examples below use <code>kebab-case</code> for identifiers. When these identifiers are used to generate code, they are transformed to the language-specific casing. For example, a feature is specified in the FML as being called <code>spotlight-search</code>, but would be referred to in Swift as <code>spotlightSearch</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="introducing-the-fml"></a>Introducing the FML<a class="hash-link" href="#introducing-the-fml" title="Direct link to heading">#</a></h2><p>The <a href="/fml-front-end-format">Feature Manifest Language is a dialect of YAML</a>. The manifest file, say <code>nimbus.fml.yaml</code> must be valid YAML.</p><p>YAML was chosen, in part, because it allows comments, there are many high quality parsers, and is a superset of JSON; JSON is used extensively in the configuration of features.</p><p>At a minimum the <code>nimbus.fml.yaml</code> file defines some data about the generated file, a list of the channels and a map of features.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># A YAML file to define Nimbus features.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># This file has zero features.</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">about</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ios</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> FxNimbus</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Blockzilla</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">android</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> .nimbus.FxNimbus</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">package</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> org.mozilla.focus</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">channels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> developer</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> nightly</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> release</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">features</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>about</code> block must contain either an <code>ios</code> or <code>android</code> object property.</p><p>The <code>channels</code> list is a list of strings containing one or more strings as build variants, or <code>channel</code>s.</p><p>The <code>features</code> property is a mapping of feature-id to feature. Feature IDs need to be valid strings. In this document all feature IDs are <code>kebab-cased</code> in the manifest.</p><p>Adding features to this object will automatically be picked up by Experimenter.</p><p>They are converted to <code>mixedCamelCase</code> in both Kotlin and Swift.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="features-have-variables"></a>Features have <code>variables</code><a class="hash-link" href="#features-have-variables" title="Direct link to heading">#</a></h3><p>We start with an example which configures the integration between Firefox for iOS and iOS Spotlight feature.</p><p>Here, we define a feature with an id of <code>spotlight-search</code>, with two variables— <code>enabled</code> and <code>max-age-in-days</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">features</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">spotlight-search</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Configuring how we integrate web</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">pages with iOS&#x27;s Spotlight search</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> If `false`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> the app will not record anything with Spotlight.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Boolean</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">max-age-in-days</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> The number of days a single piece of content is indexed for.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Double</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">28.0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Each variable has a <code>description</code>, a <code>type</code> and <code>default</code> value.</p><p>The <code>description</code> is copied verbatim into the generated code as comments. This will be visible in Xcode and Android Studio when navigating code or code completions.</p><p>The <code>type</code> is the type name or type label that the variable will be. The type labels for variables will be familiar to developers who have written Kotlin, Swift or Typescript. The <a href="#additional-types">different types of types are discussed in detail below</a>.</p><p>The <code>default</code> value is used when the variable is not set remotely, or there is a problem within the SDK.</p><p>The default value has to make sense in the context of the variable&#x27;s type.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">let spotlightConfig = FxNimbus.features.spotlightSearch.value()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">guard spotlightConfig.enabled else {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// let item = CSSearchableItem(…)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let oneDayInSeconds: TimeInterval = 24 * 60 * 60</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">let maxAgeInSeconds = Double(spotlightConfig.maxAgeInDays) * oneDayInSeconds</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">item.expirationDate = Date(timeIntervalSinceNow: maxAgeInSeconds)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">val spotlightConfig = FxNimbus.features.spotlightSearch.value()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if (!spotlightConfig.enabled) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// val item = SearchableItem(…)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">val oneDayInSeconds: Int = 24 * 60 * 60</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">val maxAgeInSeconds = spotlightConfig.maxAgeInDays * oneDayInSeconds</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">item.expirationDate = Date().addSeconds(maxAgeInSeconds)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>Notice that:</p><ul><li>the feature configuration is accessible from <code>FxNimbus.features.spotlightSearch.value()</code></li><li>the feature id and variable names have been transformed to the Swift formatting convention; in this case both to mixed-camel-case.</li><li>the values consumed by Swift are non-optional.</li></ul><p>The generated code includes the defaults. It does not need to call into the Nimbus runtime or access the network.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">struct SpotlightSearch {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    private let variables: Variables?</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    init(variables: Variables? = nil) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.variables = variables</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    lazy var enabled: Boolean = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.variables?.getBool(&quot;enabled&quot;) ?? false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    lazy var keepNumDays: Double = {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.variables?.getDouble(&quot;enabled&quot;) ?? 28.0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">data class SpotlightSearch(private val variables: Variables? = null) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    var enabled: Boolean by lazy {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.variables?.getBool(&quot;enabled&quot;) ?? false</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    var keepNumDays: Double by lazy {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        self.variables?.getDouble(&quot;enabled&quot;) ?? 28.0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>Variables are evaluated lazily.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="enumerations"></a>Enumerations<a class="hash-link" href="#enumerations" title="Direct link to heading">#</a></h3><p>Using the same <code>spotlight-search</code> feature from above. We notice that the we can include an icon in the search results.</p><p>However, we have some options around what to include, but we&#x27;re not sure which is best.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">features</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">spotlight-search</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Configuring how we integrate web-pages with iOS&#x27;s Spotlight search&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># … other variables omitted for clarity</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">item-thumbnail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &quot;The icon that appears in the Spotlight search results.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          Note that changing this does not change already indexed content.&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ThumbnailType</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> letter</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">enums</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ThumbnailType</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> An enum of types of icon that can be presented alongside titles of pages</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">variants</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">letter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> A rendering of the first letter of the domain name</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">screenshot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> A screenshot thumbnail of the webppage</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">favicon</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> The favicon derived from the webpage</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">none</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> No icon is displayed</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The value <code>itemThumbnail</code> is of type <code>ThumbnailType</code>, which is generated as an enum. This can be used exhaustively matched in a <code>switch</code> statement.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly swift"><pre tabindex="0" class="prism-code language-swift codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">switch spotlightConfig.itemThumbnail {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    case .favicon:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        item.thumbnailData = FaviconFetcher.getFaviconFromDiskCache(imageKey: baseDomain)?.pngData()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    case .letter:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        item.thumbnailData = FaviconFetcher.letter(forUrl: url).pngData()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    case .screenshot:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        item.thumbnailData = tab.screenshot?.pngData()</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    case .none:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        item.thumbnailData = nil</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">item.thumbnail = when (spotlightConfig.itemThumbnail) {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ThumbnailType.FAVICON -&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        FaviconFetcher.getFaviconFromDiskCache(imageKey: baseDomain)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ThumbnailType.LETTER -&gt; FaviconFetcher.letter(forUrl: url)</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ThumbnailType.SCREENSHOT -&gt; tab.screenshot</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ThumbnailType.NONE -&gt; null</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>Note: this Spotlight API doesn&#x27;t exist on Android; this code is illustrating the enums on the lefthand side of the <code>case</code> clauses in the <code>when</code> expression.</p><p>Note that enumeration variants in Swift are in <code>mixedCamelCase</code>; in Kotlin they are in <code>SCREAMING_SNAKE_CASE</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="feature-defaults"></a>Feature defaults<a class="hash-link" href="#feature-defaults" title="Direct link to heading">#</a></h2><p>Already, in this simple example we have three variables. We may want to vary the configuration of the feature when the user is not involved in an experiment.</p><p>This might be because we have run an experiment and learned that a change of configuration should be made more permanent.</p><p>The <code>defaults</code> list is a list of zero or more &quot;default blocks&quot;, used to patch the default values of the variables in a feature.</p><p>The <code>value</code> property defines the patch which is overlaid on top of the existing variable values.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">features</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">spotlight-search</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> If `false`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> the app will not record anything with Spotlight.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Boolean</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">max-age-in-days</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> The number of days a single piece of content is indexed for.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Double</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">28.0</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">item-thumbnail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> &quot;The icon that appears in the Spotlight search results.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          Note that changing this does not change already indexed content.&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ThumbnailType</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> letter</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">defaults</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token key atrule">item-thumbnail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> screenshot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token key atrule">max-age-in-days</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">56.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>defaults</code> list of <code>value</code>s set the default value of <code>item-thumbnail</code> to <code>screenshot</code>, and <code>max-age-in-days</code> to <code>56.0</code>.</p><p>Adding new feature blocks to the <code>defaults</code> list patches the existing defaults further:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">defaults</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token key atrule">item-thumbnail</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> screenshot</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token key atrule">max-age-in-days</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">56.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token key atrule">max-age-in-days</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">64.0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In this case, the default value for <code>item-thumbnail</code> is now <code>screenshot</code>, and <code>max-age-in-days</code> is <code>64.0</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="feature-defaults-and-channels"></a>Feature defaults and channels<a class="hash-link" href="#feature-defaults-and-channels" title="Direct link to heading">#</a></h3><p>Sometimes it is useful to have different default configurations for different <em>channels</em> of an application. For example, you may want to have a feature available for testing on Nightly or Beta before turning it on in Release.</p><p>This is achieved by declaring <code>channels</code> in the manifest.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">channels</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> nightly</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> beta</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> release</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">features</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">spotlight-search</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;…&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Boolean</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">defaults</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">channel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nightly</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>channel</code> property specifies which build flavour the default applies. In this example, the <code>nightly</code> version of the app set the <code>enabled</code> variable to <code>true</code>; all other versions of the app have <code>enabled</code> as <code>false</code>.</p><p>In this way, app developers can use the feature manifest as a replacement for other more adhoc feature flag solutions.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="additional-types"></a>Additional types<a class="hash-link" href="#additional-types" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="primitive-types"></a>Primitive types<a class="hash-link" href="#primitive-types" title="Direct link to heading">#</a></h3><p>Primitive types supported:</p><ul><li><code>String</code></li><li><code>Boolean</code>.</li><li><code>Int</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="bundle-types"></a>Bundle types<a class="hash-link" href="#bundle-types" title="Direct link to heading">#</a></h3><p>Strings that can be coerced to resources within the bundle; however they are error prone to type in the Experimenter interface.</p><p>Suggested values can be used to suggest values to the experiment owner, with a description on what the resource will look like.</p><ul><li><code>Text</code> performs a lookup for displayable text in the application bundle. If not text exists, returns the string used for lookup.</li><li><code>Image</code> performs a lookup for an image in the application bundle.</li></ul><p>For each of these types, the default value <em>must</em> correspond to a valid resource identifier in the app.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">features</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">upgrade-message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> A message displayed when the user upgrades</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">hero-image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> A pre</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">bundled image</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Image</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ic_fox</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">message-content</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Text content to show the user</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> msg_thankyou</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Swift</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel">Values for `Text` are strings which must correspond to the following format:<p><code>KEY</code> |
<code>TABLE_NAME</code> &#x27;<code>/</code>&#x27; <code>KEY</code></p><p>The lookup uses the <code>bundle.localizedString(forKey: key, value: nil, table: tableName)</code> method.</p><p>If the text is not found, then the raw string is used instead.</p><p>For <code>Image</code>, they should correspond to an image named in an asset bundle, and use the <code>UIImage(named: name, in: bundle, compatibleWith: nil)</code> constructor.</p></div><div role="tabpanel" hidden=""><p>Values for <code>Text</code> and <code>Image</code> are strings which must correspond to the following format:</p><p><code>[a-z][a-z_0-9]*</code></p><p>The lookup uses the <code>R</code> class.</p><p>Android uses integer identifiers stored in the <code>R</code> class. Sometimes these identifiers are what is required.</p><p>In the above example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">val heroImage = FxNimbus.features.upgradeMessage.value().heroImage</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">val resId: Int = heroImage.resourceId</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">val image: Drawable = heroImage.resource</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><hr><p>For <code>Text</code> strings, if the text key does not resolve to a localized string, the key itself is used as a string.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="object-types"></a>Object types<a class="hash-link" href="#object-types" title="Direct link to heading">#</a></h3><p>Some features require more organization. In the case, JSON Objects can be coerced into generated data classes.</p><p>Object types have fields in the same way features have variables. Objects can be used in multiple places, and in more than one feature.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">features</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">dialog-appearance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> A feature to vary the appearance of all toasts and modal dialogs</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">positive-button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ButtonAppearance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">background-color</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> blue</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">text-color</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> white</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">neutral-button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ButtonAppearance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">negative-button</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ButtonAppearance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">text-color</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> white</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">background-color</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> red</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">objects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ButtonAppearance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> A button used in dialogs throughout the app</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">fields</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">text-color</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> The color of the text</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> String</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> black</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">background-color</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> The background color</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> String</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> gray</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The JSON to recreate the defaults for the feature above would be:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;positive-button&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;text-color&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;blue&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;background-color&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;white&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;neutral-button&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;text-color&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;black&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;background-color&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;gray&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;negative-button&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;text-color&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;red&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;background-color&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;white&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="structural-types"></a>Structural types<a class="hash-link" href="#structural-types" title="Direct link to heading">#</a></h3><p>Generic types aren&#x27;t supported, but in the following section, <code>T</code> can be any other type supported by the FML, including structural types.</p><ul><li><code>Option&lt;T&gt;</code> or <code>T?</code></li><li><code>List&lt;T&gt;</code> - lists of type <code>T</code>. Lists are encoded with JSON arrays.
Lists are not merged, so are less useful than you might think.</li><li><code>Map&lt;K, V&gt;</code> — maps with key type <code>K</code> to <code>V</code>.</li></ul><p>Maps are transported as JSON objects, which restrict the types of the keys to types that can be coerced from <code>String</code>s. Additionally, JSON values that cannot be coerced to the value type of the map are discarded.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">features</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">homepage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">sections-enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> A map of whether or not to display the sections.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Map&lt;SectionId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Boolean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">top-sites</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">jump-back-in</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">pocket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">recently-saved</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">recent-searches</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">section-ordering</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> The order that the sections appear in on the homescreen.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> List&lt;SectionId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> jump</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">back</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">in</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> pocket</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> recently</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">saved</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> recent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">searches</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">defaults</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">channel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nightly</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">top-sites</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">jump-back-in</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">recently-saved</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">recent-searches</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token key atrule">pocket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">enums</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">SectionId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">description</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> An enum representing the sections enabled by the homepage.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">variants</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">top-sites</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Frecency based URLs</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">jump-back-in</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Tabs which the user was interrupted while reading.</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">pocket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        URLs from the Pocket homepage</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">recently-saved</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        URLs which were recently bookmarked or saved to Pocket</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">recent-searches</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Search queries and their opened results.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In this example, a <code>Map&lt;SectionId, Boolean&gt;</code> is used. <code>SectionId</code> is an enum.</p><p>Maps with enum keys must have a default value for every variant of the enum.</p><p>Since maps are backed by JSON objects, the merge/patching allows entries to come from the manifest, experiments and rollouts simulatenously.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="merging-other-fml-files-into-this-one"></a>Merging other FML files into this one<a class="hash-link" href="#merging-other-fml-files-into-this-one" title="Direct link to heading">#</a></h2><p>This <code>include</code> property is a list of files which will be merged with this one. The files may be relative to this one, absolute or URLs.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">include</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> nimbus/search.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> @mozilla/nimbus</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">shared/fml/messaging.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Notice the <code>@</code> in the second entry: by default this will be interpretted as a Github repository, with the file path on the <code>main</code> branch. More about <a href="/fml-paths">using <code>@</code> paths here</a>.</p><p>In this example, two files are merged into this one: the <code>features</code>, <code>enums</code> and <code>objects</code> from each are added to the corresponding objects in this one.</p><p><a href="/fml-imports-and-includes#the-include-list">More</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="linking-files-from-other-components"></a>Linking files from other components<a class="hash-link" href="#linking-files-from-other-components" title="Direct link to heading">#</a></h2><p>The <code>import</code> list is a list of objects referencing other FML files from other components. The code generated from those files are generated at build time of those components, with their own channels and configurations.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">    ../Accounts/nimbus.fml.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">channel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> production</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">    @mozilla</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">mobile/ios</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">components/components/feature/search/nimbus.fml.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">channel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> release</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The list contains blocks with the following mandatory properties:</p><ul><li><code>path</code>: this string value is a relative path or URL to the imported file.</li><li><code>channel</code>: this string value is the name of a channel. The channel <strong>must</strong> be in the channel list of the included file.</li></ul><p>An imported file:</p><ul><li><strong>must</strong> have an <code>about</code> block.</li><li><strong>may</strong> have an <code>include</code> block.</li></ul><p>Optionally, a <code>features</code> block is provided, which is a <code>Map&lt;FeatureId, List&lt;DefaultBlock&gt;&gt;</code>. This provides a way of providing app specific configuration to already built components.</p><p>A list of <code>DefaultBlock</code>s is the same way feature defaulting, and channel specific defaulting works when specifying a feature.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">    ../Accounts/nimbus.fml.yaml</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">channel</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> production</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">features</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">accounts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token key atrule">button-color</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> blue</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>value</code> used by the imported code will come from the importing code.</p><p><a href="/fml-imports-and-includes#the-import-list">More</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/mozilla/experimenter-docs/edit/main/docs/deep-dives/specifications/fml-spec.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/fml-paths"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Using paths in FML</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cookbook/fml/index"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Feature Manifest Cookbook »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#about-this-document" class="table-of-contents__link">About this document</a></li><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#high-level-concepts" class="table-of-contents__link">High level concepts</a><ul><li><a href="#json-merge-patch" class="table-of-contents__link">JSON Merge Patch</a></li><li><a href="#about-the-generated-code" class="table-of-contents__link">About the generated code</a></li><li><a href="#recording-exposure" class="table-of-contents__link">Recording exposure</a></li><li><a href="#identifier-cases" class="table-of-contents__link">Identifier cases</a></li></ul></li><li><a href="#introducing-the-fml" class="table-of-contents__link">Introducing the FML</a><ul><li><a href="#features-have-variables" class="table-of-contents__link">Features have <code>variables</code></a></li><li><a href="#enumerations" class="table-of-contents__link">Enumerations</a></li></ul></li><li><a href="#feature-defaults" class="table-of-contents__link">Feature defaults</a><ul><li><a href="#feature-defaults-and-channels" class="table-of-contents__link">Feature defaults and channels</a></li></ul></li><li><a href="#additional-types" class="table-of-contents__link">Additional types</a><ul><li><a href="#primitive-types" class="table-of-contents__link">Primitive types</a></li><li><a href="#bundle-types" class="table-of-contents__link">Bundle types</a></li><li><a href="#object-types" class="table-of-contents__link">Object types</a></li><li><a href="#structural-types" class="table-of-contents__link">Structural types</a></li></ul></li><li><a href="#merging-other-fml-files-into-this-one" class="table-of-contents__link">Merging other FML files into this one</a></li><li><a href="#linking-files-from-other-components" class="table-of-contents__link">Linking files from other components</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Mozilla Corporation</div></div></div></footer></div>
<script src="/assets/js/runtime~main.90a1e22e.js"></script>
<script src="/assets/js/main.ae154802.js"></script>
</body>
</html>